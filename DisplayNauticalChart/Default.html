<!DOCTYPE html>
<html style="height:100%">
<head>
    <title>Hello World</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ol3/4.6.5/ol.css" />

</head>
<body style="height: 98%">
    <div id="map" style="height: 100%; width: 100%"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/ol3/4.6.5/ol.js"></script>
    <script>
        var projection4326 = ol.proj.get('EPSG:4326');
        var map = new ol.Map({
            target: 'map',
            controls: ol.control.defaults({ attribution: false, rotate: false }).extend(
                [new ol.control.Attribution({ collapsible: false })]),
            view: new ol.View({ center: [-87.51036995, 41.8291724], zoom: 11, projection: projection4326 })
        });

        getRootPath = function () {
            var pathArray = location.pathname.split('/');
            var appPath = "/";
            for (var i = 1; i < pathArray.length - 1; i++) {
                appPath += pathArray[i] + "/";
            }

            return appPath === "/" ? "" : appPath;
        };

        var thinkgeoCloudMapsLayer = new ol.layer.Tile({
            source: new ol.source.XYZ({
                url: 'https://cloud{1-6}.thinkgeo.com/api/v1/maps/raster/light/x1/3857/512/{z}/{x}/{y}.png?apikey=ThinkGeo Cloud API Key',
                maxZoom: 19,
                tileSize: 512,
                params:
                {
                    'LAYERS': 'ThinkGeoCloudMaps',
                    'VERSION': '10.4.0',
                    'STYLE': 'Light'
                }
            })
        });
        map.addLayer(thinkgeoCloudMapsLayer);

        var layerDecimalDegreeSource = new ol.source.XYZ({
            projection: projection4326,
            url: getRootPath() + '/DisplayNauticalChart/tile/{z}/{x}/{y}',
            maxZoom: 19,
            tileLoadFunction: function (imageTile, src) { imageTile.getImage().src = src + '?t=' + new Date().getTime(); }
        });

        var countriesLayer = new ol.layer.Tile({ source: layerDecimalDegreeSource });

        map.addLayer(countriesLayer);
    </script>
</body>

</html>
